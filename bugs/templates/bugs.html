{% extends 'base.html' %}
{% block content %}
<div class="row">
    <div class="headingTitle"><h1>Bugs</h1></div>
    
    <div class="col s2"><a href="{% url 'new_bug' %}"  class="btn btn-default">Add Bug</a></div>
    
    <div class="col s8">
        <form action="{% url 'sort_bugs' %}}" method="GET" >
            <span>
                <select name="sort_by" id="sort_by" >
                <option value="votes">Votes</option>
                <option value="author">Created by</option>
                <option value="status">Status</option>
                <option value="created_date">Date</option>
              </select>
            </span>
    </div>
            <div class="col s2">
                <button class="btn waves-effect waves-light" type="submit" name="action" >Sort
                <i class="material-icons right">playlist_add</i>
                 </button>
            </div>
     </form>
     
    
    <div class="status-bar col s12">
    <span>Status:</span>
    <span class="completed">Completed</span>
    <span class="progressed">In progress</span>
    <span class="pending">Pending</span>
    </div>
    
  
    
    
    <ul class="collapsible" data-collapsible="accordion">
    {% for bug in bugs %}
            <li>
                <div class="collapsible-header">
                    <div class="col s2 {{ bug.status }}"> </div>
                    
                    <div class="col s9">
                    <strong>Bug Name</strong> : {{ bug.title }} - <strong> Create By </strong> : {{ bug.author }} - <strong>Votes</strong> : {{ bug.votes.count }}  - <strong>Date Added</strong> : {{ bug.created_date }}
                    </div>
                    <div class="col s1"> <i class="material-icons">expand_more</i>
                    </div>
                </div>
                <div class="collapsible-body">
                    <div class="row">
                    <div class="col s2">Details: </div>
                    <div class="col s8">
                    {{bug.description}} 
                    </div>
                    <div class="col s2">
                        <div class="row">
                            {% if user not in bug.votes.all %}
                                <a class="btn btn-blue" href="{% url 'vote_bug' bug.id %}"><i class="fas fa-arrow-up"></i>Vote Up</a>
                            {% else %}
                                <a class="btn btn-blue" href="{% url 'vote_bug' bug.id %}">Cancel Vote</a>
                            {% endif %}
                        </div>
                        <div class="row">
                            <a href="{% url 'bug_detail' bug.id %}"  class="btn btn-red">View Bug</a>
                        </div>
                    </div>
                    </div>
                </div>
        </li>
    {% endfor %}
    </ul>
    </div>
{% endblock %}

    